<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>J & V — Invitación de Boda</title>

  <style>
:root{
  --bGold: rgba(201,151,43,.34);
  --bChamp: rgba(241,209,138,.32);
  --bCream: rgba(255,248,235,.34);
  --bWhite: rgba(255,255,255,.26);
}

    *{ box-sizing:border-box; }

    /* ✅ regla general: ninguna imagen puede salirse del contenedor */
    img{ max-width:100%; height:auto; }

    html, body{
      width:100%;
      height:100%;
      margin:0;
    }

    body{
      display:grid;
      place-items:center;

      min-height:100vh;
      min-height:100svh;
      min-height:100dvh;

      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--white);
      overflow:hidden;
      padding:18px;
      text-align:center;
      color:#222;
    }

    .bg-base{
      position:fixed;
      inset:0;
      z-index:-4;
        background: linear-gradient(135deg,
        #ffffff 0%,
        #fff6e6 25%,
        #f1d18a 55%,
        #fffaf1 80%,
        #ffffff 100%);
      background-size:300% 300%;
      animation: baseMove 7s ease-in-out infinite;
    }

    /* ====== CAMBIO MÍNIMO: bubbles ahora son CONTENEDORES (ya no background fijo) ====== */
    .bubbles{
      position:fixed;
      inset:-6%;
      z-index:-3;
      pointer-events:none;
      overflow:hidden;
    }

    .bubbles2{
      position:fixed;
      inset:-10%;
      z-index:-2;
      pointer-events:none;
      overflow:hidden;
      mix-blend-mode: soft-light;
    }

    /* ====== NUEVO: burbujas individuales ====== */
    .bubble{
      position:absolute;
      border-radius:999px;
      pointer-events:none;
      will-change: transform;
      transform: translate3d(0,0,0);
    }

    .bubble.gold{
      background: radial-gradient(circle at 30% 30%,
        rgba(255,255,255,.38) 0%,
        var(--bChamp) 35%,
        var(--bGold) 72%,
        rgba(255,255,255,0) 100%);
    }

    .bubble.cream{
      background: radial-gradient(circle at 30% 30%,
        rgba(255,255,255,.42) 0%,
        var(--bCream) 58%,
        rgba(255,255,255,0) 100%);
    }

    .bubble.white{
      background: radial-gradient(circle at 30% 30%,
        rgba(255,255,255,.35) 0%,
        var(--bWhite) 62%,
        rgba(255,255,255,0) 100%);
    }

    .shimmer{
      position:fixed;
      inset:-25%;
      z-index:-1;
      pointer-events:none;
      background: linear-gradient(115deg,
        rgba(255,255,255,0) 0%,
        rgba(241,209,138,.65) 45%,
        rgba(255,255,255,0) 60%
      );
      filter: blur(10px);
      opacity:.5;
      animation: shimmerMove 7s ease-in-out infinite;
    }

    @keyframes baseMove{
      0%{ background-position:0% 50%; }
      50%{ background-position:100% 50%; }
      100%{ background-position:0% 50%; }
    }

    /* (Dejo tus keyframes aunque ya no se usen; no estorban) */
@keyframes bubblesFloat{
  0%   { transform: translate(-3%, -2%) scale(1); }
  18%  { transform: translate(4%,  1%) scale(1.03); }
  37%  { transform: translate(1%,  4%) scale(1.02); }
  58%  { transform: translate(-4%, 2%) scale(1.04); }
  78%  { transform: translate(-1%, -4%) scale(1.03); }
  100% { transform: translate(-3%, -2%) scale(1); }
}
@keyframes bubblesFloat2{
  0%   { transform: translate(3%,  2%) scale(1.02); }
  22%  { transform: translate(-2%, 4%) scale(1.06); }
  45%  { transform: translate(-4%, -1%) scale(1.04); }
  70%  { transform: translate(2%, -4%) scale(1.07); }
  100% { transform: translate(3%,  2%) scale(1.02); }
}

    @keyframes shimmerMove{
      0%{ transform:translateX(-40%) rotate(6deg); }
      50%{ transform:translateX(10%) rotate(6deg); }
      100%{ transform:translateX(45%) rotate(6deg); }
    }

    .card{
      width: min(680px, 92vw);
      padding: 26px 42px;
      border-radius: 18px;
      background: rgba(255,255,255,.75);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(201,151,43,.45);
      box-shadow: 0 20px 45px rgba(0,0,0,.14);

      /* ✅ opcional pero útil: si algo se pasa, se recorta dentro del borde redondeado */
      overflow:hidden;
    }

    .jv-logo{
      display:flex;
      justify-content:center;
      margin: 0 0 12px 0;
    }

    .jv-logo img{
      width: 320px;
      max-width: 85%;
      height: auto;
      display:block;
      filter: drop-shadow(0 3px 6px rgba(0,0,0,.20));
    }

    .text{
      font-size: .95rem;
      letter-spacing: 2px;
      color:#444;
      margin: 0 0 1.5rem 0;
    }

    .bow{
      display:block;
      width: 100%;
      max-width: 420px;
      margin: 0 auto;
      cursor:pointer;
      user-select:none;
      -webkit-user-drag:none;
      transition:transform .3s ease;
    }
    .bow:hover{ transform:scale(1.05); }

    .status{
      margin-top: 5px;
      font-size: 0.85rem;
      color:#444;
      min-height: 1.2em;
    }

@media (max-width: 520px){
  .card{
    width: 84vw;
    padding: 22px 18px;
    border-radius: 18px;
  }

  .jv-logo img{ width: 200px; }

  .text{
    letter-spacing: 1.4px;
    margin: 0 0 1.1rem 0;
    font-size: .9rem;
  }

  .bow{
    max-width: 360px;
  }
}

    @media (prefers-reduced-motion: reduce){
      .bg-base, .bubbles, .bubbles2, .shimmer{ animation:none; }
      /* opcional: si reduce-motion, ocultamos burbujas generadas */
      .bubble{ display:none; }
    }
  </style>
</head>

<body>
  <div class="bg-base"></div>
  <div class="bubbles"></div>
  <div class="bubbles2"></div>
  <div class="shimmer"></div>

  <div class="card">
    <div class="jv-logo">
      <img src="assets/jv-gold.png" alt="J & V" />
    </div>
    <p class="text">TOCA EL MOÑO PARA ABRIR</p>

    <img src="assets/bow-white.jpeg" alt="Moño" class="bow" id="bow" />
    <div class="status" id="status"></div>
  </div>

  <audio id="bg-music" preload="auto">
    <source src="assets/MusicaparaBoda.m4a" type="audio/mp4">
    Tu navegador no soporta audio.
  </audio>

  <script>
    const bow = document.getElementById("bow");
    const music = document.getElementById("bg-music");
    const statusEl = document.getElementById("status");

    bow.addEventListener("click", async () => {
      try {
        if (!music.paused) return;
        await music.play();
        statusEl.textContent = "Música activada";
      } catch (e) {
        statusEl.textContent = "No se pudo reproducir. Verifica el archivo en /assets.";
        console.error(e);
      }
    });

    /* ✅ CAMBIO SOLO DE MOVIMIENTO: burbujas independientes (no bloque) */
    const reduceMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    if (!reduceMotion) {
      const layer1 = document.querySelector(".bubbles");
      const layer2 = document.querySelector(".bubbles2");

      // Velocidad (px/seg). Sube estos valores si quieres más rápido.
      const SPEED_1 = 26; // capa 1
      const SPEED_2 = 18; // capa 2

      function rand(min, max){ return Math.random() * (max - min) + min; }

      function makeBubble(parent, kind, sizeMin, sizeMax, opMin, opMax){
        const el = document.createElement("span");
        el.className = `bubble ${kind}`;
        parent.appendChild(el);

        const size = rand(sizeMin, sizeMax);
        el.style.width = `${size}px`;
        el.style.height = `${size}px`;
        el.style.opacity = rand(opMin, opMax).toFixed(2);

        // Estado
        const b = {
          el,
          size,
          px: 0,
          py: 0,
          vx: rand(-1, 1),
          vy: rand(-1, 1),
          ax: 0,
          ay: 0,
          steerLeft: rand(0.6, 1.4)
        };

        // Normaliza dirección inicial
        const mag = Math.hypot(b.vx, b.vy) || 1;
        b.vx /= mag; b.vy /= mag;

        return b;
      }

      function setup(parent, count, palette, sizeMin, sizeMax, opMin, opMax){
        const arr = [];
        for (let i=0; i<count; i++){
          const kind = palette[(Math.random() * palette.length) | 0];
          const b = makeBubble(parent, kind, sizeMin, sizeMax, opMin, opMax);
          // posición inicial aleatoria dentro del viewport
          b.px = rand(0, Math.max(0, window.innerWidth - b.size));
          b.py = rand(0, Math.max(0, window.innerHeight - b.size));
          arr.push(b);
        }
        return arr;
      }

      // Cantidad y look por capa
      const bubbles1 = setup(layer1, 10, ["gold","cream","white"], 80, 200, 0.18, 0.38);
      const bubbles2 = setup(layer2,  8, ["gold","cream","white"], 60, 160, 0.12, 0.28);

      let w = window.innerWidth, h = window.innerHeight;
      window.addEventListener("resize", () => {
        w = window.innerWidth;
        h = window.innerHeight;
      }, { passive:true });

      let last = performance.now();

      function tick(now){
        const dt = Math.min(0.033, (now - last) / 1000);
        last = now;

        function update(arr, speed){
          for (const b of arr){
            // steering aleatorio suave
            b.steerLeft -= dt;
            if (b.steerLeft <= 0){
              b.steerLeft = rand(0.6, 1.4);
              b.ax = rand(-0.9, 0.9);
              b.ay = rand(-0.9, 0.9);
            }

            b.vx += b.ax * dt * 0.6;
            b.vy += b.ay * dt * 0.6;

            // normaliza para mantener velocidad constante
            const mag = Math.hypot(b.vx, b.vy) || 1;
            b.vx /= mag; b.vy /= mag;

            b.px += b.vx * speed * dt;
            b.py += b.vy * speed * dt;

            const maxX = Math.max(0, w - b.size);
            const maxY = Math.max(0, h - b.size);

            // rebote
            if (b.px <= 0){ b.px = 0; b.vx = Math.abs(b.vx); }
            if (b.px >= maxX){ b.px = maxX; b.vx = -Math.abs(b.vx); }
            if (b.py <= 0){ b.py = 0; b.vy = Math.abs(b.vy); }
            if (b.py >= maxY){ b.py = maxY; b.vy = -Math.abs(b.vy); }

            b.el.style.transform = `translate3d(${b.px}px, ${b.py}px, 0)`;
          }
        }

        update(bubbles1, SPEED_1);
        update(bubbles2, SPEED_2);

        requestAnimationFrame(tick);
      }

      requestAnimationFrame(tick);
    }
  </script>
</body>
</html>
